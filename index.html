<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TeleBail</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.box{
width:90%;
max-width:400px;
background:rgba(255,255,255,0.05);
padding:20px;
border-radius:20px;
backdrop-filter:blur(10px);
}

input{
width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:10px;
outline:none;
background:rgba(255,255,255,0.1);
color:white;
}

button{
width:100%;
padding:12px;
margin-top:15px;
border:none;
border-radius:10px;
background:linear-gradient(90deg,red,blue);
color:white;
font-weight:bold;
cursor:pointer;
}

.hidden{display:none;}
.center{text-align:center;}
img{width:80px;height:80px;border-radius:50%;margin-top:10px;}
</style>
</head>
<body>

<div class="box">

<!-- LOGIN -->
<div id="loginPage">
<h2 class="center">TeleBail Login</h2>
<input type="text" id="loginEmail" placeholder="example@bail.com">
<input type="password" id="loginPass" placeholder="Parol">
<button onclick="login()">Kirish</button>
<p class="center" onclick="showRegister()" style="cursor:pointer;">Ro'yxatdan o'tish</p>
</div>

<!-- STEP 1 AGE -->
<div id="agePage" class="hidden">
<h3>Tug'ilgan sana</h3>
<input type="date" id="birth">
<button onclick="checkAge()">Davom etish</button>
</div>

<!-- STEP 2 EMAIL -->
<div id="emailPage" class="hidden">
<h3>Email yaratish</h3>
<input type="text" id="username" placeholder="example">
<p>@bail.com</p>
<button onclick="saveEmail()">Davom etish</button>
</div>

<!-- STEP 3 PASSWORD -->
<div id="passPage" class="hidden">
<h3>Parol qo'yish</h3>
<input type="password" id="regPass">
<button onclick="savePass()">Davom etish</button>
</div>

<!-- STEP 4 PROFILE -->
<div id="profilePage" class="hidden">
<h3>Profil</h3>
<input type="text" id="name" placeholder="Ism">
<input type="text" id="surname" placeholder="Familiya">
<input type="file" id="photo">
<button onclick="finishRegister()">Saqlash</button>
</div>

<!-- HOME -->
<div id="homePage" class="hidden center">
<h2>Xush kelibsiz!</h2>
<img id="userImg">
<h3 id="userName"></h3>
<button onclick="logout()">Chiqish</button>
</div>

</div>

<script>
let tempEmail="";
let tempPass="";

function showRegister(){
loginPage.classList.add("hidden");
agePage.classList.remove("hidden");
}

function checkAge(){
let birth=new Date(document.getElementById("birth").value);
let age=new Date().getFullYear()-birth.getFullYear();
if(age<16){
alert("Siz 16 yoshdan kichiksiz");
}else{
agePage.classList.add("hidden");
emailPage.classList.remove("hidden");
}
}

function saveEmail(){
let username=document.getElementById("username").value;
if(username.length<3){
alert("Username kamida 3 harf");
return;
}
tempEmail=username+"@bail.com";
emailPage.classList.add("hidden");
passPage.classList.remove("hidden");
}

function savePass(){
let pass=document.getElementById("regPass").value;
if(pass.length<6 || !/[0-9]/.test(pass) || !/[a-zA-Z]/.test(pass)){
alert("Parol 6+ belgi, harf va raqam bo'lishi kerak");
return;
}
tempPass=pass;
passPage.classList.add("hidden");
profilePage.classList.remove("hidden");
}

function finishRegister(){
let name=document.getElementById("name").value;
let surname=document.getElementById("surname").value;
let photo=document.getElementById("photo").files[0];

let reader=new FileReader();
reader.onload=function(){
localStorage.setItem("email",tempEmail);
localStorage.setItem("pass",tempPass);
localStorage.setItem("name",name+" "+surname);
localStorage.setItem("photo",reader.result);
alert("Ro'yxatdan o'tdingiz!");
location.reload();
}
if(photo){
reader.readAsDataURL(photo);
}else{
alert("Rasm tanlang");
}
}

function login(){
let email=document.getElementById("loginEmail").value;
let pass=document.getElementById("loginPass").value;

if(email!==localStorage.getItem("email") || pass!==localStorage.getItem("pass")){
alert("Noto'g'ri email yoki parol");
return;
}

loginPage.classList.add("hidden");
homePage.classList.remove("hidden");

userName.innerText=localStorage.getItem("name");
userImg.src=localStorage.getItem("photo");
}

function logout(){
location.reload();
}
</script>

</body>
</html>